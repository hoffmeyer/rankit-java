package rankit;

import java.util.ArrayList;
import java.util.List;

import ro.pippo.core.Application;
import ro.pippo.core.ParameterValue;

public class RankitApp extends Application {
	
	private List<Player> players = new ArrayList<>();

	@Override
	protected void onInit() {
		
		initList();

		GET("/list", (routeContext) -> routeContext.json().send( players ) );

		POST("/player", (routeContext) ->{
			ParameterValue name = routeContext.getParameter("name");
			if( name != null ){
				players.add(new Player(players.size() + 1, name.toString(), 1000));
				routeContext.send("OK");
			}
			routeContext.status(501).send("Attribute name is undefined");
		} );

	}
	
	private void initList(){
		players.add(new Player(1, "The Hoff", 1000));
		players.add(new Player(3, "Heidi", 1000));
		players.add(new Player(4, "Hunden", 1000));
	}
}
